 Домашнее задание 1 

pg_lsclusters --- проверим есть ли сущестующие кластеры

sudo su postgres --- перключаемся на пользователя postgres


 1.Выполнить pgbench-c8 -P 6 -T 60 -U postgres postgres.

pgbench  -i postgres ---инициализацию (initialization) тестовой базы данных для последующего benchmarking'а с помощью утилиты pgbench.
pgbench -c8 -P 6 -T 60 -U postgres postgres ---запуск бенчмарка 
записать результат выполнения бенчмарка

2. Настроить параметры vacuum/autovacuum.

autovacuum_analyze_scale_factor    
autovacuum_analyze_threshold   
autovacuum_max_workers   
показать что пременились применились - для autovacuum_max_workers   стоит параметр сontext требующий перезапуска кластера 

 3. Заново протестировать: pgbench-c8 -P 6 -T 60 -U postgres postgres и 
сравнить результаты.

Удалось ли улучшить производительность




 4. Создать таблицу с текстовым полем и заполнить случайными или 
сгенерированными данным в размере 1млн строк.

CREATE TABLE student(
  id serial,
  fio char(100)

INSERT INTO student(fio) SELECT 'noname' FROM generate_series(1,1000000);



 5. Посмотреть размер файла с таблицей.
SELECT pg_size_pretty(pg_total_relation_size('student'));

 6. Обновить все строчки 5 раз добавив к каждой строчке любой символ.

update student set fio = 'name'; 


 7. Посмотреть количество мертвых строчек в таблице и когда последний раз 
приходил автовакуум.

SELECT relname, n_live_tup, n_dead_tup, trunc(100*n_dead_tup/(n_live_tup+1))::float "ratio%", last_autovacuum 
FROM pg_stat_user_TABLEs WHERE relname = 'test';

Объяснить почему такое количество мертвых строк получилось, сработал ли автовакуум и когда


 8. Отключить Автовакуум на таблице и опять 5 раз обновить все строки.
update student set fio = 'name';



 9. Объяснить полученные результаты
